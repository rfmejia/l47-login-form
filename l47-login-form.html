<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../paper-input/paper-input.html">

<!--
`l47-login-form`
Stylized login form suitable for single page apps.

Listen to the 'login-clicked' event to catch the username and password. After the event is fired, the password input is automatically cleared.

@demo demo/index.html 
-->

<dom-module id="l47-login-form">
<template>
  <style>
    :host {
      display: block;
    }
    #main {
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
    }
    vr {
      border-left: 1px solid var(--primary-text-color);
      border-right: 1px solid var(--secondary-text-color);
      height: 280px;
      margin: 0 60px;
    }
    paper-button[raised] {
      background-color: var(--dark-primary-color);
      margin-top: 16px;
      color: white;
      width: 100%;
    }

    @media (max-width: 600px) {
      #main {
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      }
      vr {
        display: none;
      }
    }
  </style>

  <div id="main">
    <content></content>
    <vr></vr>
    <form is="iron-form" id="loginForm">
      <div class="vertical layout" style="margin-bottom: 15px">
        <paper-input id="usernameInput" placeholder="{{usernamePlaceholder}}" value="{{username}}" autofocus required></paper-input>
        <paper-input id="passwordInput" type="password" placeholder="{{passwordPlaceholder}}" value="{{_password}}" required></paper-input>
      </div>
      <div>
        <paper-checkbox hidden="{{!withRememberMe}}" value="{{rememberMe}}">{{rememberMePlaceholder}}</paper-checkbox>
      </div>
      <div style="margin-top: 10px">
        <a href='#' on-click="_passwordResetClicked" hidden="{{!withPasswordReset}}">{{passwordResetPlaceholder}}</a>
      </div>
      
      <div style="margin-top: 10px">
        <paper-button raised on-tap="_loginClicked">{{loginButtonText}}</paper-button>
        <button type="submit" hidden></button>
      </div>
    </form>
  </div>

  </template>

  <script>
    Polymer({

      is: 'l47-login-form',

      properties: {
        username: {
          type: String,
        },

        usernamePlaceholder: {
          type: String,
          value: 'Username'
        },

        passwordPlaceholder: {
          type: String,
          value: 'Password',
        },

        loginButtonText: {
          type: String,
          value: 'Login',
        },

        withRememberMe: {
          type: Boolean,
          value: false,
        },

        rememberMePlaceholder: {
          type: String,
          value: 'Remember me',
        },

        rememberMe: {
          type: Boolean,
          value: false,
        },

        withPasswordReset: {
          type: Boolean,
          value: false,
        },

        passwordResetPlaceholder: {
          type: String,
          value: 'Reset password',
        },

        _password: String
      },

      _loginClicked: function(event) {
        this.fire('login-clicked', { username: this.username, password: this._password });
        this._password = null;
      },

      _passwordResetClicked: function(event) {
        this.fire('password-reset-clicked', event.detail);
      },
    });
  </script>
</dom-module>
